<%- include('partials/nav') %>

<div class="container main-cont">
  <div class="row">
    <div class="col-sm-12 col-md-9">
      <form>
        <input type="text" name="title" class="form-control" placeholder="Title">
        <textarea rows="20" name="text" class="summernote"></textarea>
        <input type="text" name="author" placeholder="Your Name" class="form-control">
        <button class="btn btn-info submit float-right">Add Article</button>
      </form>
      <div class="success">
        <h1><i class="fa fa-check-circle text-info"></i> Your article has been added successfully!</h1>
        <a id="link" href="/"><i class="fa fa-eye"></i> Check it out!</a>
        <a href="/"><i class="fa fa-home"></i> Go Home</a>
      </div>
    </div>
  </div>
</div>
<script src="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.9/summernote-bs4.js"></script>
<script type="text/javascript">
$(document).ready(function() {
  $(".summernote").summernote({
    height: 300
  });
});
$(".submit").on("click", e => {
  e.preventDefault();
  $.ajax({
    url: "./",
    method: "POST",
    data: {
      title: $("input[name='title']").val(),
      article: $("textarea").val(),
      author: $("input[name='author']").val()
    },
    success: function(data) {
      if (data == "200") {
        var title = $("input[name='title']").val();
        title = title.replace(/\s+/g, "-").toLowerCase();
        $("#link").prop("href", "/article/" + title);
        $("form").fadeOut("slow", function() {
          $(".success").fadeIn("fast");
        });
      }
    }
  });
});
</script>
<%- include('partials/footer') %>
